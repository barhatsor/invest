'use strict';let deferredInstallPrompt=null;const installWrapper=document.querySelector(".install-wrapper"),installButton=document.querySelector(".install");installButton.addEventListener("click",installPWA),window.addEventListener("beforeinstallprompt",saveBeforeInstallPromptEvent);function saveBeforeInstallPromptEvent(a){a.preventDefault(),deferredInstallPrompt=a,installWrapper.classList.remove("hidden")}function installPWA(){deferredInstallPrompt.prompt(),deferredInstallPrompt.userChoice.then(a=>{"accepted"===a.outcome?(installWrapper.classList.add("download"),setTimeout(function(){document.querySelector(".install-wrapper p").innerHTML="Adding...",installWrapper.style.color="#fff"},200),console.log("User accepted the A2HS prompt")):console.log("User dismissed the A2HS prompt"),deferredInstallPrompt=null})}window.addEventListener("appinstalled",logAppInstalled);function logAppInstalled(a){installWrapper.classList.add("hidden"),console.log("Invest installed succesfully.",a)}window.addEventListener("DOMContentLoaded",()=>{let a="browser tab";navigator.standalone&&(a="standalone-ios"),window.matchMedia("(display-mode: standalone)").matches&&(a="standalone"),console.log("DISPLAY_MODE_LAUNCH:",a)});var apiResponse,v=2.8;class APIHandler{constructor(){}sendAPIReq(a){if(a){httpRequest("GET","https://cloud.iexapis.com/stable/stock/market/batch?symbols="+a+"&types=quote&displayPercent=true&token=pk_370633a589a240f29304a7420b9960ec",this.handleResponse)}else document.querySelector(".entries").innerHTML="<a>Add some stocks by searching above</a>"}handleResponse(a){apiResponse=a,stocks.buildHTML(apiResponse)}}class stockEntries{constructor(){}renderSkeleton(a){return"<div class=\"entry\"><div class=\"arrow-wrapper\"><svg class=\"arrow\" width=\"20px\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-122.9 121.1 105.9 61.9\"><path d=\"M-63.2 180.3l43.5-43.5c1.7-1.7 2.7-4 2.7-6.5s-1-4.8-2.7-6.5c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.7L-69.9 161l-37.2-37.2c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.6c-1.9 1.8-2.8 4.2-2.8 6.6 0 2.3.9 4.6 2.6 6.5 11.4 11.5 41 41.2 43 43.3l.2.2c3.6 3.6 10.3 3.6 13.9 0z\" fill=\"#fff\"/></svg></div><h1>"+a+"</h1><p>.</p></div>"}buildHTML(a){if(this.out="",0!=a.length){var b;for(var c in a)b=0>a[c].quote.changePercent?"<h2 class='red'>":"<h2>+",this.out+="<div class='entry' onclick='stocks.toggleDetails(this)'><div class=\"arrow-wrapper\"><svg class=\"arrow\" width=\"20px\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-122.9 121.1 105.9 61.9\"><path d=\"M-63.2 180.3l43.5-43.5c1.7-1.7 2.7-4 2.7-6.5s-1-4.8-2.7-6.5c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.7L-69.9 161l-37.2-37.2c-1.7-1.7-4-2.7-6.5-2.7s-4.8 1-6.5 2.6c-1.9 1.8-2.8 4.2-2.8 6.6 0 2.3.9 4.6 2.6 6.5 11.4 11.5 41 41.2 43 43.3l.2.2c3.6 3.6 10.3 3.6 13.9 0z\" fill=\"#fff\"/></svg></div><h1>"+a[c].quote.symbol+"</h1><p>"+a[c].quote.companyName+"</p>"+b+round(a[c].quote.changePercent,1)+"%</h2><span>"+round(a[c].quote.latestPrice,1)+"</span><div class='stats'></div></div>"}else this.out="<a>No stocks matching filter</a>";document.querySelector(".entries").innerHTML=this.out}toggleDetails(a){var b=a.classList.toggle("open");b&&this.renderDetails(apiResponse[a.children[1].innerHTML],a)}renderDetails(a,b){this.out="",this.out+="<div class=\"stat\"><p>Prev Close</p><a>"+round(a.quote.previousClose)+"</a></div>",this.out+="<div class=\"stat\"><p>Open</p><a>"+round(a.quote.open)+"</a></div>",this.out+="<div class=\"stat\"><p>Low</p><a>"+round(a.quote.low)+"</a></div>",this.out+="<div class=\"stat\"><p>High</p><a>"+round(a.quote.high)+"</a></div>",this.out+="<div class=\"stat\"><p>52wk Low</p><a>"+round(a.quote.week52Low)+"</a></div>",this.out+="<div class=\"stat\"><p>52wk High</p><a>"+round(a.quote.week52High)+"</a></div>",this.out+="<div class=\"stat\"><p>Mkt Cap</p><a>"+moneyFormat(a.quote.marketCap)+"</a></div>",this.out+="<div class=\"stat\"><p>Volume</p><a>"+moneyFormat(a.quote.volume)+"</a></div>",this.out+="<div class=\"stat\"><p>Avg Vol (3m)</p><a>"+moneyFormat(a.quote.avgTotalVolume)+"</a></div>",this.out+="<div class=\"stat\"><p>P/E</p><a>"+round(a.quote.peRatio,1)+"</a></div>",b.children[5].innerHTML=this.out}}function filterStocks(a){for(var b in a)20>a[b].quote.peRatio||document.querySelectorAll(".entry").forEach(c=>{c.children[1].innerHTML==a[b].quote.symbol&&(c.style.animation="filter .5s forwards cubic-bezier(.79,.14,.15,.86)",window.setTimeout(function(){c.style.animation="",c.style.display="none"},500))})}var prevrequest="";document.querySelector(".search").addEventListener("input",function(){""!=this.value&&this.value!=prevrequest?(prevrequest=this.value,httpRequest("GET","https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords="+this.value+"&apikey=XH456FPPVS8MHBXA",renderSuggestions)):(document.querySelector(".search").classList.remove("suggestions"),document.querySelector(".search-wrapper").classList.remove("suggestions"),document.body.style.overflow="auto")}),document.querySelector(".search").addEventListener("keyup",function(a){13===a.keyCode&&(addStock(document.querySelector(".search-wrapper").children[1]),document.querySelector(".search-wrapper").classList.remove("suggestions"),document.querySelector(".search").blur())}),document.querySelector(".search").addEventListener("blur",function(){document.querySelector(".search").classList.remove("suggestions"),document.querySelector(".search").value="",document.body.style.overflow="auto"}),document.querySelector(".search-wrapper").addEventListener("click",function(){document.querySelector(".search-wrapper").classList.remove("suggestions")}),document.querySelector(".close").addEventListener("click",function(){document.querySelector(".search-wrapper").classList.remove("suggestions")});function renderSuggestions(a){document.querySelector(".search-wrapper").classList.add("suggestions"),document.querySelector(".search").classList.add("suggestions"),document.body.style.overflow="hidden";var b="";a.Note?b="<div class=\"suggestion\"><p>No internet</p></div>":(a.bestMatches.forEach(a=>{b+="<div class=\"suggestion\" onclick=\"addStock(this)\"><p>"+a["1. symbol"]+"</p><a>"+a["2. name"]+"</a></div>"}),""==b&&(document.querySelector(".search-wrapper").classList.remove("suggestions"),document.querySelector(".search").classList.remove("suggestions"))),document.querySelector(".search-wrapper").innerHTML="<hr>"+b}function addSwipeListener(a){function b(){e<c&&console.log("swiped: left!"),e>c&&console.log("swiped: right!"),f<d&&console.log("swiped: down!"),f>d&&console.log("swiped: left!"),f==d&&console.log("tap!")}var c=0,d=0,e=0,f=0;a.addEventListener("touchstart",function(a){c=a.screenX,d=a.screenY},!1),a.addEventListener("touchend",function(a){e=a.screenX,f=a.screenY,b()},!1)}var tickers,tArray=[];localStorage.getItem("tickers")?(tArray=localStorage.getItem("tickers").split(","),tickers=tArray.join(",")):tickers=tArray.join(","),localStorage.setItem("tickers",tickers);function addStock(a){tArray.includes(a.children[0].innerHTML)||(tArray.unshift(a.children[0].innerHTML),document.querySelector(".entries").innerHTML=stocks.renderSkeleton(a.children[0].innerHTML)+document.querySelector(".entries").innerHTML,tickers=tArray.join(","),localStorage.setItem("tickers",tickers),APIhandler.sendAPIReq(tickers))}function removeStock(a){var b=tArray.indexOf(a.children[0].innerHTML);-1<b&&tArray.splice(b,1),a.remove(),tickers=tArray.join(","),localStorage.setItem("tickers",tickers)}function switchTab(a){document.querySelector(".header").innerHTML="<svg class=\"icon\" width=\"30px\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 4 5\"><path d=\"M0.376,4.214c-0.213,-0.042 -0.376,-0.225 -0.376,-0.407l0,-3.478c0,-0.182 0.148,-0.329 0.329,-0.329c0.182,0 0.329,0.147 0.329,0.329l0,3.304c0.45,-0.16 1.352,-0.341 1.417,-0.711c0.1,-0.578 -1.295,-0.817 -1.201,-1.233c0.06,-0.262 1.257,-0.738 1.448,-0.975c0.139,-0.173 -0.487,-0.446 -0.399,-0.501c0.099,-0.062 1.142,-0.24 1.418,0.04c0.295,0.297 0.211,1.089 0.116,1.23c-0.095,0.141 -0.447,-0.384 -0.616,-0.348c-0.234,0.05 -1.042,0.447 -1.083,0.603c-0.041,0.156 0.456,0.189 0.741,0.451c0.145,0.134 0.347,0.459 0.287,0.767c-0.054,0.278 -0.356,0.542 -0.478,0.636c-0.311,0.242 -0.781,0.391 -1.031,0.465c-0.431,0.128 -0.689,0.198 -0.901,0.156Z\" fill=\"#f9f9fa\"></path></svg><p>News</p>",document.querySelector(".entries").style.display="none",document.querySelector(".footer").style.backgroundColor="#111",document.querySelector(".footer").style.boxShadow="inset 0 1px 0 0 rgb(255 255 255 / 0.24)",document.querySelector(".footer").children[0].innerHTML="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 29 23\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M26.985,8.979c0,-2.265 -1.838,-4.104 -4.103,-4.104l-17.653,0c-2.265,0 -4.104,1.839 -4.104,4.104l0,8.207c0,2.265 1.839,4.103 4.104,4.103l17.653,0c2.265,0 4.103,-1.838 4.103,-4.103l0,-8.207Z\" fill=\"none\" stroke=\"#fff\" stroke-width=\"1.5px\"></path><path d=\"M19.609,4.537c0,-1.883 -1.244,-3.412 -2.777,-3.412l-5.554,0c-1.532,0 -2.777,1.529 -2.777,3.412\" fill=\"none\" stroke=\"#fff\" stroke-width=\"1.5px\"></path><path d=\"M24.392,9.331l-10.598,5.365l-10.076,-5.392\" fill=\"none\" stroke=\"#fff\" stroke-width=\"1.5px\"></path></svg>",document.querySelector(".footer").children[2].innerHTML="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 384 360\"><path d=\"M287.247,324.747c0,-9.182 0,-306.099 0,-313.497c0,-6.213 -5.037,-11.25 -11.25,-11.25l-264.747,0c-6.213,0 -11.25,5.037 -11.25,11.25l0,290.997c0,31.016 25.234,56.249 56.249,56.249l242.279,0c-7.079,-9.408 -11.281,-21.097 -11.281,-33.749Zm-227.248,-108.749l36,0c6.213,0 11.25,5.037 11.25,11.25c0,6.213 -5.037,11.25 -11.25,11.25l-36,0c-6.213,0 -11.249,-5.037 -11.249,-11.25c0,-6.213 5.036,-11.25 11.249,-11.25Zm-11.249,-36.75c0,-6.213 5.036,-11.25 11.249,-11.25l36,0c6.213,0 11.25,5.037 11.25,11.25c0,6.213 -5.037,11.25 -11.25,11.25l-36,0c-6.213,0 -11.249,-5.037 -11.249,-11.25Zm179.248,125.249l-167.999,0c-6.213,0 -11.249,-5.037 -11.249,-11.25c0,-6.213 5.036,-11.25 11.249,-11.25l167.999,0c6.213,0 11.25,5.037 11.25,11.25c0,6.213 -5.037,11.25 -11.25,11.25Zm11.25,-59.249c0,6.213 -5.037,11.249 -11.25,11.249l-83.999,0c-6.213,0 -11.25,-5.036 -11.25,-11.249l0,-84c0,-6.213 5.037,-11.249 11.25,-11.249l83.999,0c6.213,0 11.25,5.036 11.25,11.249l0,84Zm-11.25,-120.749l-167.999,0c-6.213,0 -11.249,-5.037 -11.249,-11.25c0,-6.213 5.036,-11.25 11.249,-11.25l167.999,0c6.213,0 11.25,5.037 11.25,11.25c0,6.213 -5.037,11.25 -11.25,11.25Zm0,-48l-167.999,0c-6.213,0 -11.249,-5.037 -11.249,-11.25c0,-6.213 5.036,-11.25 11.249,-11.25l167.999,0c6.213,0 11.25,5.037 11.25,11.25c0,6.213 -5.037,11.25 -11.25,11.25Z\" fill=\"#fff\" fill-rule=\"nonzero\"></path><rect x=\"155.248\" y=\"172.498\" width=\"61.499\" height=\"61.499\" fill=\"#fff\" fill-rule=\"nonzero\"></rect><path d=\"M372.746,77.999l-62.999,0c0,254.917 -0.038,246.755 0.067,246.755c0.971,15.706 11.705,28.76 26.205,33.185c23.194,7.077 46.975,-9.702 47.94,-34.014c0.058,0 0.037,5.62 0.037,-234.676c0,-6.213 -5.037,-11.25 -11.25,-11.25Z\" fill=\"#fff\" fill-rule=\"nonzero\"></path></svg>",window.location.href=a}function round(a,b){var c=Math.pow(10,b||0);return null==a?"-":Math.round(a*c)/c}function httpRequest(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(this.responseText);c(a)}},d.open(a,b,!0),d.send()}function moneyFormat(a){var b=1e9<=Math.abs(+a)?Math.abs(+a)/1e9+"B":1e6<=Math.abs(+a)?Math.abs(+a)/1e6+"M":1e3<=Math.abs(+a)?Math.abs(+a)/1e3+"K":Math.abs(+a);try{return round(parseFloat(b))+b.replace(/[^B|M|K]/g,"")}catch{return"-"}}document.querySelector(".filter-button").addEventListener("click",()=>{document.querySelector(".filter-button").classList.toggle("active"),document.querySelector(".filters-wrapper").classList.toggle("active")}),document.querySelectorAll(".filter").forEach(a=>{a.addEventListener("click",()=>{var b=a.classList.toggle("active");b?filterStocks(apiResponse):document.querySelectorAll(".entry").forEach(a=>{"none"==a.style.display&&(a.style.display="",a.style.animation="filter .5s reverse cubic-bezier(.79,.14,.15,.86)",window.setTimeout(function(){a.style.animation=""},500))})})}),APIhandler=new APIHandler,stocks=new stockEntries;for(var i=0;i<tArray.length;i++)document.querySelector(".entries").innerHTML+=stocks.renderSkeleton(tArray[i]);APIhandler.sendAPIReq(tickers);const CACHE_NAME="static-cache-v1",FILES_TO_CACHE=["/offline.html"];self.addEventListener("install",a=>{a.waitUntil(caches.open(CACHE_NAME).then(a=>a.addAll(FILES_TO_CACHE))),self.skipWaiting()}),self.addEventListener("activate",a=>{a.waitUntil(caches.keys().then(a=>Promise.all(a.map(a=>{if(a!==CACHE_NAME)return caches.delete(a)})))),self.clients.claim()}),self.addEventListener("fetch",a=>{"navigate"!==a.request.mode||a.respondWith(fetch(a.request).catch(()=>caches.open(CACHE_NAME).then(a=>a.match("offline.html"))))});